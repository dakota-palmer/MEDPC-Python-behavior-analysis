@@ -387,7 +387,7 @@ S2,
 
 S3, \In this state, PE has occurred and duration is being recorded
   #R^PortEntry:--->S3
-   #Z9 ! .01": SET L(B(6))=(B(13)-1)/100-K(B(6));
+  #Z9 ! .01": SET L(B(6))=(B(13)-1)/100-K(B(6));
                SHOW 6, PeDuration, L(B(6));\dp added trying to debug
                ON ^portOutTTL--->S4 \TTL PULSE FOR PORT EXIT \This is only recording Pexits after the program starts (should be fine)
 
@@ -646,7 +646,7 @@ S2,
 
 S.S.23, \NS TTL Signal
 S1,
-    #start:--->S2
+    #K21:--->S2
 S2,
     #Z6: ON ^nsTTL--->S3
 S3,
@@ -655,7 +655,7 @@ S3,
 
 S.S.24, \DS TTL Signal
 S1,
-    #start: --->S2
+    #K21: --->S2
 S2,
     #Z2: ON ^dsTTL ---> S3
 S3,
@@ -664,16 +664,18 @@ S3,
 
 S.S.25, \Port Entry TTL Signal     (Port exit TTL signal is higher up in code, where PE and PE duration are recorded)
 S1,
-    #R^PortEntry: ON ^PortInTTL ---> S2
+    #K21: ---> S2
 S2,
-    #R^PortEntry: ---> S2 \done like this b/c sustained PE sensor is being used (must turn the TTL off after entering or it will stay active)
-    .01": OFF ^PortInTTL ---> S1
+    #R^PortEntry: ON ^PortInTTL ---> S3
+S3,
+    #R^PortEntry: ---> S3 \done like this b/c sustained PE sensor is being used (must turn the TTL off after entering or it will stay active)- if there's a continuous PE stay here
+   .01": OFF ^PortInTTL ---> S2
 
 S.S.26, \Lick TTL Signal
 S1,
-    #start: ---> S2
+    #K21: ---> S2
 S2,
     #R^Lick: ON ^LickTTL ---> S3
 S3,
-    .01": OFF ^LickTTL--->S1
+    .01": OFF ^LickTTL--->S2
 
